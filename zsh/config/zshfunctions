# DO NOT EDIT THIS FILE
# duplicate this file in zsh/config/zshfunctions
# to enable/add your own custom configuration

#########################
# Non OS specific functions to deal with some things
#########################

# Checks if phpunit is installed in vendor folder or if we should use global one.
    function get_phpunit_install() {
        if [ -f vendor/bin/paratest ]; then
            echo './vendor/bin/paratest'
        elif [ -f vendor/bin/phpunit ]; then
            echo './vendor/bin/phpunit'
        else
            echo 'phpunit'
        fi
    }

if [[ "$(declare -f build_project_assets > /dev/null; echo $?)" = 1 ]]; then
    # Check current directory asset building dependencies, install and build them
    function build_project_assets() {
        # Check for composer install
            if [[ -f composer.json ]]; then
                # Install dependencies
                composer install
            fi

        # Check for NPM lock file else use YARN
            if [[ -f package-lock.json ]]; then
                # Install dependencies
                npm install
                # Compile assets
                npm run dev
            elif [[ -f package.json ]]; then
                # Install dependencies
                yarn install
                # Compile assets
                yarn run dev
            fi
        }
fi

####################################
# OS specific functions
####################################

if [[ "$OSTYPE" == "linux-gnu" ]]; then
    # Jot function allows you to quickly write
    # notes to a file from shell.
    function jot {
        if [ $1 ]
        then
            cat <<< $1 > /home/marius/Documents/temp
            cat  /home/marius/Documents/jot >> /home/marius/Documents/temp
            mv /home/marius/Documents/temp /home/marius/Documents/jot
        else
            gedit /home/marius/Documents/jot &
        fi
    }
# Check if tmux exists then start new terminal with tmux
if command -v tmux>/dev/null; then
    [[ ! $TERM =~ screen ]] && [ -z $TMUX ] && exec tmux
fi
elif [[ "$OSTYPE" == "darwin"* ]]; then
    # Custom MAC OSX functions

    #Fix displaying of ugly user.
    prompt_context() {
        if [[ "$USER" != "$DEFAULT_USER" || -n "$SSH_CLIENT" ]]; then
            prompt_segment black default "%(!.%{%F{yellow}%}.)$USER"
        fi
    }
fi
